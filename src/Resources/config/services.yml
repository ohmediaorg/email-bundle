services:
    OHMedia\EmailBundle\Command\CleanupCommand:
        arguments: ["@doctrine.orm.entity_manager", "%ohmedia_email.cleanup%"]
        tags: ["console.command"]

    OHMedia\EmailBundle\Command\SendCommand:
        tags: ["console.command"]

    OHMedia\EmailBundle\Repository\EmailRepository:
        arguments: ["@Doctrine\\Persistence\\ManagerRegistry"]
        tags: ["doctrine.repository_service"]

    OHMedia\EmailBundle\EventListener\EmailPrePersist:
        arguments: ["@doctrine.orm.entity_manager", "@twig", "%ohmedia_email.from_email%", "%ohmedia_email.from_name%", "%ohmedia_email.subject_prefix%"]
        tags:
            -
                name: 'doctrine.orm.entity_listener'
                event: 'prePersist'
                entity: 'OHMedia\EmailBundle\Entity\Email'
